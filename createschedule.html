<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Dog Feeder Website</title>
    <link rel="stylesheet" href="style.css">
    <script>
        function addTimeInput() {
            var container = document.getElementById("timeContainer");
            var newInput = document.createElement("p");
            newInput.innerHTML = '<input type="time" name="times[]">';
            container.appendChild(newInput);
        }
        function toggleSelectAll(source) {
            checkboxes = document.getElementsByName('days');
            for (var i = 0; i < checkboxes.length; i++) {
                checkboxes[i].checked = source.checked;
            }
        }
	
	// This is prototype code made with the help of the internet. May not work.
	// Loading form data from choose_schedule.html
	window.onload = function() {
        	var rowData = JSON.parse(localStorage.getItem("selectedRow"));
        	if (rowData) {
        	    document.getElementById("name").value = rowData[0];
        	    document.getElementById("petname").value = rowData[1];
		    document.getElementById("immapply").checked = rowData[2] === true;
		    document.getElementById("sunday").checked = rowData[3] === true;
		    document.getElementById("monday").checked = rowData[4] === true;
		    document.getElementById("tuesday").checked = rowData[5] === true;
		    document.getElementById("wednesday").checked = rowData[6] === true;
		    document.getElementById("thursday").checked = rowData[7] === true;
		    document.getElementById("friday").checked = rowData[8] === true;
		    document.getElementById("saturday").checked = rowData[9] === true;
        	    document.getElementById("food").value = rowData[10];

		    
        	    // Handling multiple time values
        	    let timeArray = rowData[11]; // Assuming time values are stored in index 11 as an array
        	    if (Array.isArray(timeArray)) {
        	    let timeContainer = document.getElementById("timeContainer"); // ID of the container
        	    let timeInputs = timeContainer.getElementsByClassName("time-input"); // Get all time inputs inside the container
            	    for (let i = 0; i < timeInputs.length; i++) {
                	    if (timeArray[i]) { // Ensure there's a value to set
                    	    	timeInputs[i].value = timeArray[i];
               	    	    }
           	    }
        	}
    	};
    </script>
</head>
<body>
    <nav id="mainNav">
        <div class="logo">
            <a href="#">
                <img src="https://img.freepik.com/free-vector/cute-australian-shepherd-dog-cartoon-vector-icon-illustration-animal-nature-icon-isolated-flat_138676-12952.jpg?t=st=1740161020~exp=1740164620~hmac=5743745bec7aba68dd2858b5139186b1fca9de7d739ee2724fa27f4d0ee1f0cb&w=900" alt="Dog">  </a>
        </div>
        <ul class="nav-links">
            <li class="nav-item"><a href="#" data-page="home">Home</a></li>
            <li class="nav-item"><a href="https://capiibarkbytes.github.io/schedule.html" data-page="https://capiibarkbytes.github.io/schedule">Schedule</a></li>
            <li class="nav-item"><a href="https://capiibarkbytes.github.io/login.html" data-page="https://capiibarkbytes.github.io/login.html">Login</a></li>
            <li class="nav-item"><a href="https://capiibarkbytes.github.io/signup.html" data-page="https://capiibarkbytes.github.io/singup.html">Sign Up</a></li>
            <li class="nav-item"><a href="#" data-page="contact">Contact</a></li>
            <li class="nav-item"><a href="#" data-page="account">My Account</a></li>
            <li class="nav-item"><a href="https://capiibarkbytes.github.io/onDemand.html" data-page="On Demand">ON DEMAND</a></li>
        </ul>
        <div class="burger">
          <div class="line1"></div>
          <div class="line2"></div>
          <div class="line3"></div>
        </div>
    </nav>

    <main id="content">
        <section id="home" class="page active">
            <h1>Create a schedule</h1>
            <p>Create a new feeding schedule for your pet (or edit an existing one)</p>
            <p><hr /></p>
		<form action="submit_schedule.js" method="post">
			<p>Enter schedule name: <input name="schedule_name" type="text" id="name"/></p>
			<p>Name of pet: <input name="dog_name" type="text" id="petname"/></p>
			<p><input name="Checkbox1" type="checkbox" id="immapply"/> Apply schedule immediately?</p>
			<p>On what days should the feeder run (this repeats)?</p>
			<p><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)"> Every Day</p>
			<p><input type="checkbox" name="days" value="0" id="sunday"> Sunday</p>
        		<p><input type="checkbox" name="days" value="1" id="monday"> Monday</p>
        		<p><input type="checkbox" name="days" value="2" id="tuesday"> Tuesday</p>
        		<p><input type="checkbox" name="days" value="3" id="wednesday"> Wednesday</p>
        		<p><input type="checkbox" name="days" value="4" id="thursday"> Thursday</p>
        		<p><input type="checkbox" name="days" value="5" id="friday"> Friday</p>
        		<p><input type="checkbox" name="days" value="6" id="saturday"> Saturday</p>
        		<p>How much food should be dispensed during each run?</p>
        		<p>Enter amount here (in mililiters (mL)): <input name="food_amount" type="number" id="food"/></p>
        		<p>At what times should the feeder run?</p>
        		<div id="timeContainer">
            		<p><input type="time" name="times[]" class="time-input"></p>
        		</div>
        		<p><input type="button" value="Add Another Time" onclick="addTimeInput()" /></p>
        		<p><input name="submit_schedule" type="submit" value="Submit New Schedule" /></p>
    		</form>
    		<p>&nbsp;</p>
		</section>
	</main>
			
	<script src="script.js"></script>
</body>
</html>
