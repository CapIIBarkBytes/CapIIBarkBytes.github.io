<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Schedule | Bark Bytes</title>
    <link rel="stylesheet" href="style.css">
    <script>
	// This is prototype code made with the help of the internet. May not work.
	// Loading form data from choose_schedule.html
	window.onload = function() {
	    try {
        	var rowData = JSON.parse(localStorage.getItem("selectedRow"));
        	if (rowData) {
        	    document.getElementById("name").value = rowData[0] || "";
        	    document.getElementById("petname").value = rowData[1] || "";
		    document.getElementById("immapply").checked = rowData[2] === true;
		    document.getElementById("sunday").checked = rowData[3] === true;
		    document.getElementById("monday").checked = rowData[4] === true;
		    document.getElementById("tuesday").checked = rowData[5] === true;
		    document.getElementById("wednesday").checked = rowData[6] === true;
		    document.getElementById("thursday").checked = rowData[7] === true;
		    document.getElementById("friday").checked = rowData[8] === true;
		    document.getElementById("saturday").checked = rowData[9] === true;
        	    document.getElementById("food").value = rowData[10] || "";

		    
        	    // Handling multiple time values
        	    let timeArray = rowData[11]; // Assuming time values are stored in index 11 as an array
            	    if (Array.isArray(timeArray)) {
                    	let timeContainer = document.getElementById("timeContainer");
                    	timeArray.forEach(time => {
                        	let newInput = document.createElement("p");
                        	newInput.innerHTML = `<input type="time" name="times[]" class="time-input" value="${time}">`;
                        	timeContainer.appendChild(newInput);
                    	});
                    }
        	}
	    } catch (e) {
		    console.error("Error loading schedule data:", e);
	    }
    	};
	function addTimeInput() {
            var container = document.getElementById("timeContainer");
            var newInput = document.createElement("p");
            newInput.innerHTML = '<input type="time" name="times[]" class="time-input">';
            container.appendChild(newInput);
        }
        function toggleSelectAll(source) {
            checkboxes = document.getElementsByName('days');
            for (var i = 0; i < checkboxes.length; i++) {
                checkboxes[i].checked = source.checked;
            }
        }
	
    </script>
</head>
<body>
    <div class="overall-nav">
    <nav id="mainNav">
        <div class="logo">
            <a href="index.html">
                <img src="images/img5.webp" alt="Dog">  </a>
        </div>
        <ul class="nav-links">
            <li class="nav-item"><a href="index.html" target="_self">Home</a></li>
            <li class="nav-item"><a href="schedule.html" target="_self">Schedule</a></li>
            <li class="nav-item"><a href="login.html" target="_self">Login</a></li>
            <li class="nav-item"><a href="signup.html" target="_self">Sign Up</a></li>
            <li class="nav-item"><a href="#" target="_self">Contact</a></li>
            <li class="nav-item"><a href="#" target="_self">My Account</a></li>
            <li class="nav-item"><a href="onDemand.html" target="_self">ON DEMAND</a></li>
        </ul>
        <div class="burger">
          <div class="line1"></div>
          <div class="line2"></div>
          <div class="line3"></div>
        </div>
    </nav>
    </div>

    <main id="content">
        <section id="home" class="page active">
            <h1 style="color: brown;">CREATE A SCHEDULE</h1>
            <p style="font-size: large; color: brown;">Create a new feeding schedule for your pet (or edit an existing one)</p>
            <p>&nbsp;</p>
		<form style="font-weight: bolder;">
			<p>Enter schedule name: <input name="schedule_name" type="text" id="name" class="input-box"/></p>
			<p>Name of pet: <input name="dog_name" type="text" id="petname" class="input-box"/></p>
			<p><input name="Checkbox1" type="checkbox" id="immapply"/> Apply schedule immediately?</p>
			<p>On what days should the feeder run (this repeats)?</p>
			<p><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)"> Every Day</p>
			<p><input type="checkbox" name="days" value="0" id="sunday"> Sunday</p>
        		<p><input type="checkbox" name="days" value="1" id="monday"> Monday</p>
        		<p><input type="checkbox" name="days" value="2" id="tuesday"> Tuesday</p>
        		<p><input type="checkbox" name="days" value="3" id="wednesday"> Wednesday</p>
        		<p><input type="checkbox" name="days" value="4" id="thursday"> Thursday</p>
        		<p><input type="checkbox" name="days" value="5" id="friday"> Friday</p>
        		<p><input type="checkbox" name="days" value="6" id="saturday"> Saturday</p>
        		<p>How much food should be dispensed during each run?</p>
        		<p>Enter amount here (in mililiters (mL)): <input name="food_amount" type="number" id="food" class="input-box"/></p>
        		<p>At what times should the feeder run?</p>
        		<div id="timeContainer">
            		<p><input type="time" name="times[]" class="time-input"></p>
        		</div>
        		<p><input type="button" value="Add Another Time" onclick="addTimeInput()" class="more-buttons" /></p>
        		<p><input id="postSubmit" type="submit" value="Submit New Schedule" class="more-buttons" /></p>
    		</form>
    		<p>&nbsp;</p>
		</section>
	</main>

    <div class="bottom-border"></div>

			
	<script src="script.js"></script>
	<script src="submit_schedule.js"></script>
</body>
</html>
